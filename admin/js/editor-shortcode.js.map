{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_src/admin/editor-shortcode/editor-shortcode.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","tinymce","PluginManager","add","editor","ed","activeEditor","buildTermCheckboxes","values","prefix","checkboxes","push","type","text","categoryValues","getLang","tagValues","categoriesCheckboxes","tagsCheckboxes","categoriesValues","calendarp_menu","onclick","windowManager","open","title","body","classes","minHeight","border","label","items","html","onopen","e","target","$el","find","append","css","color","prepend","onsubmit","category_field","default_view_field","selectedCategories","time_format","dow_format","month_name_format","day_format","date_format","data","length","join","insertContent","maxLength","size","extractTerms","selected","selectedTags","tag_field","events_field","events_by_cat_events_count_field","hidden","attr","$idField","autocomplete","source","request","response","wp","api","collections","Calendar_event","fetch","search","term","done","dataLength","parsedData","id","rendered","appendTo","parent","val","select","event","ui","item","event_id_field","event_id","addButton","icon","menu"],"mappings":"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","file":"editor-shortcode.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","(function ($) {\n\ttinymce.PluginManager.add('calendarp_shortcodes', function (editor) {\n\t\tlet ed = tinymce.activeEditor;\n\n\t\tlet buildTermCheckboxes = function (values, prefix) {\n\t\t\tlet checkboxes = [];\n\n\t\t\tfor (let i in values) {\n\t\t\t\tif (values.hasOwnProperty(i)) {\n\t\t\t\t\tcheckboxes.push({\n\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t\tname: prefix + values[i].value,\n\t\t\t\t\t\ttext: values[i].text,\n\t\t\t\t\t\tvalue: values[i].value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn checkboxes;\n\t\t};\n\n\t\tlet categoryValues = ed.getLang('calendarp_l10n.category_field_values');\n\t\tlet tagValues = ed.getLang('calendarp_l10n.tag_field_values');\n\n\t\tlet categoriesCheckboxes = buildTermCheckboxes(categoryValues, 'category_');\n\t\tlet tagsCheckboxes = buildTermCheckboxes(tagValues, 'tag_');\n\n\t\tlet categoriesValues = categoryValues;\n\n\t\tlet calendarp_menu = [\n\t\t\t{\n\t\t\t\ttext: ed.getLang('calendarp_l10n.calendar_title'),\n\t\t\t\tonclick: function () {\n\t\t\t\t\teditor.windowManager.open({\n\t\t\t\t\t\ttitle: ed.getLang('calendarp_l10n.calendar_title'),\n\t\t\t\t\t\tbody: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'infobox',\n\t\t\t\t\t\t\t\tclasses: 'categories-infobox',\n\t\t\t\t\t\t\t\tminHeight: 50,\n\t\t\t\t\t\t\t\tborder: 'none'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'container',\n\t\t\t\t\t\t\t\tname: 'categories_list_start',\n\t\t\t\t\t\t\t\tlabel: ed.getLang('calendarp_l10n.category_field_title'),\n\t\t\t\t\t\t\t\titems: categoriesCheckboxes,\n\t\t\t\t\t\t\t\thtml: '<div class=\"calp_mce_categories_list\">'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'container',\n\t\t\t\t\t\t\t\tname: 'categories_list_end',\n\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\thtml: '</div>'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'listbox',\n\t\t\t\t\t\t\t\tname: 'default_view_field',\n\t\t\t\t\t\t\t\tlabel: ed.getLang('calendarp_l10n.default_view_title'),\n\t\t\t\t\t\t\t\tvalues: ed.getLang('calendarp_l10n.default_view_values'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'listbox',\n\t\t\t\t\t\t\t\tname: 'time_format',\n\t\t\t\t\t\t\t\tlabel: 'Time format',\n\t\t\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t\t\t{text: '11:00 pm', value: 'g:i a'},\n\t\t\t\t\t\t\t\t\t{text: '23:00', value: 'H:i'}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'listbox',\n\t\t\t\t\t\t\t\tname: 'dow_format',\n\t\t\t\t\t\t\t\tlabel: 'Day of the week format',\n\t\t\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t\t\t{text: 'Sunday', value: 'l'},\n\t\t\t\t\t\t\t\t\t{text: 'Sun', value: 'D'}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'listbox',\n\t\t\t\t\t\t\t\tname: 'month_name_format',\n\t\t\t\t\t\t\t\tlabel: 'Month name format',\n\t\t\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t\t\t{text: 'Jan', value: 'M'},\n\t\t\t\t\t\t\t\t\t{text: 'January', value: 'F'}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'listbox',\n\t\t\t\t\t\t\t\tname: 'day_format',\n\t\t\t\t\t\t\t\tlabel: 'Day format',\n\t\t\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t\t\t{text: '09', value: 'd'},\n\t\t\t\t\t\t\t\t\t{text: '9', value: 'j'}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'listbox',\n\t\t\t\t\t\t\t\tname: 'date_format',\n\t\t\t\t\t\t\t\tlabel: 'Date format',\n\t\t\t\t\t\t\t\tvalues: [\n\t\t\t\t\t\t\t\t\t{text: '15/09', value: 'd/m'},\n\t\t\t\t\t\t\t\t\t{text: '15/9', value: 'j/n'},\n\t\t\t\t\t\t\t\t\t{text: '09/15', value: 'm/d'},\n\t\t\t\t\t\t\t\t\t{text: '9/15', value: 'n/j'}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'infobox',\n\t\t\t\t\t\t\t\tclasses: 'day-format-infobox',\n\t\t\t\t\t\t\t\tminHeight: 34,\n\t\t\t\t\t\t\t\tborder: 'none'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonopen: function (e) {\n\t\t\t\t\t\t\te.target.$el.find('.mce-day-format-infobox')\n\t\t\t\t\t\t\t\t.append('<a target=\"_blank\" href=\"https://codex.wordpress.org/Formatting_Date_and_Time\">Documentation on date and time formatting</a>')\n\t\t\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\t\t\tcolor: '#0073aa',\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\te.target.$el.find('.mce-categories-infobox')\n\t\t\t\t\t\t\t\t.prepend('<p>' + ed.getLang('calendarp_l10n.category_field_info') + '</p>');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonsubmit: function (e) {\n\t\t\t\t\t\t\tlet category_field,\n\t\t\t\t\t\t\t\tdefault_view_field,\n\t\t\t\t\t\t\t\tselectedCategories,\n\t\t\t\t\t\t\t\ttime_format,\n\t\t\t\t\t\t\t\tdow_format,\n\t\t\t\t\t\t\t\tmonth_name_format,\n\t\t\t\t\t\t\t\tday_format,\n\t\t\t\t\t\t\t\tdate_format;\n\n\t\t\t\t\t\t\tselectedCategories = [];\n\t\t\t\t\t\t\tfor (i in categoriesValues) {\n\t\t\t\t\t\t\t\tif (categoriesValues.hasOwnProperty(i)) {\n\t\t\t\t\t\t\t\t\tif (true === e.data['category_' + categoriesValues[i].value]) {\n\t\t\t\t\t\t\t\t\t\tselectedCategories.push(categoriesValues[i].value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (0 !== selectedCategories.length) {\n\t\t\t\t\t\t\t\tcategory_field = ' category=\"' + selectedCategories.join(',') + '\"';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcategory_field = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e.data.default_view_field !== 'month') {\n\t\t\t\t\t\t\t\tdefault_view_field = ' view=\"' + e.data.default_view_field + '\"';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdefault_view_field = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e.data.time_format !== ed.getLang('calendarp_l10n.default_time_format')) {\n\t\t\t\t\t\t\t\ttime_format = ' time_format=\"' + e.data.time_format + '\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\ttime_format = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e.data.dow_format !== 'l') {\n\t\t\t\t\t\t\t\tdow_format = ' dow_format=\"' + e.data.dow_format + '\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdow_format = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e.data.month_name_format !== 'M') {\n\t\t\t\t\t\t\t\tmonth_name_format = ' month_name_format=\"' + e.data.month_name_format + '\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tmonth_name_format = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e.data.day_format !== 'd') {\n\t\t\t\t\t\t\t\tday_format = ' day_format=\"' + e.data.day_format + '\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tday_format = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e.data.date_format !== 'd/m') {\n\t\t\t\t\t\t\t\tdate_format = ' date_format=\"' + e.data.date_format + '\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdate_format = '';\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\teditor.insertContent('[calendarp-calendar'\n\t\t\t\t\t\t\t\t+ category_field\n\t\t\t\t\t\t\t\t+ default_view_field\n\t\t\t\t\t\t\t\t+ time_format\n\t\t\t\t\t\t\t\t+ dow_format\n\t\t\t\t\t\t\t\t+ month_name_format\n\t\t\t\t\t\t\t\t+ date_format\n\t\t\t\t\t\t\t\t+ day_format\n\t\t\t\t\t\t\t\t+ ']');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: ed.getLang('calendarp_l10n.events_by_cat_title'),\n\t\t\t\tonclick: function () {\n\t\t\t\t\teditor.windowManager.open({\n\t\t\t\t\t\ttitle: ed.getLang('calendarp_l10n.events_by_cat_title'),\n\t\t\t\t\t\tbody: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'infobox',\n\t\t\t\t\t\t\t\tclasses: 'categories-infobox',\n\t\t\t\t\t\t\t\tminHeight: 50,\n\t\t\t\t\t\t\t\tborder: 'none'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'container',\n\t\t\t\t\t\t\t\tname: 'events_by_cat_categories_list_start',\n\t\t\t\t\t\t\t\tlabel: ed.getLang('calendarp_l10n.events_by_cat_category_field_title'),\n\t\t\t\t\t\t\t\titems: categoriesCheckboxes,\n\t\t\t\t\t\t\t\thtml: '<div class=\"calp_mce_categories_list\">'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'container',\n\t\t\t\t\t\t\t\tname: 'events_by_cat_categories_list_end',\n\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\thtml: '</div>'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'container',\n\t\t\t\t\t\t\t\tname: 'events_by_cat_tags_list_start',\n\t\t\t\t\t\t\t\tlabel: ed.getLang('calendarp_l10n.events_by_cat_tag_field_title'),\n\t\t\t\t\t\t\t\titems: tagsCheckboxes,\n\t\t\t\t\t\t\t\thtml: '<div class=\"calp_mce_tags_list\">'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'container',\n\t\t\t\t\t\t\t\tname: 'events_by_cat_tags_list_end',\n\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\thtml: '</div>'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'textbox',\n\t\t\t\t\t\t\t\tname: 'events_by_cat_events_count_field',\n\t\t\t\t\t\t\t\tlabel: ed.getLang('calendarp_l10n.events_by_cat_events_count_field_title'),\n\t\t\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t\t\t\tmaxLength: 3,\n\t\t\t\t\t\t\t\tsize: 3\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonopen: function (e) {\n\t\t\t\t\t\t\te.target.$el.find('.mce-categories-infobox')\n\t\t\t\t\t\t\t\t.prepend('<p>' + ed.getLang('calendarp_l10n.events_by_cat_info') + '</p>');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonsubmit: function (e) {\n\n\t\t\t\t\t\t\tlet extractTerms = function (values, prefix) {\n\t\t\t\t\t\t\t\tlet selected = [];\n\n\t\t\t\t\t\t\t\tfor (let i in values) {\n\t\t\t\t\t\t\t\t\tif (values.hasOwnProperty(i)) {\n\t\t\t\t\t\t\t\t\t\tif (true === e.data[prefix + values[i].value]) {\n\t\t\t\t\t\t\t\t\t\t\tselected.push(values[i].value);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn selected;\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tlet selectedCategories = extractTerms(categoryValues, 'category_');\n\t\t\t\t\t\t\tlet selectedTags = extractTerms(tagValues, 'tag_');\n\n\t\t\t\t\t\t\tlet category_field = (0 === selectedCategories.length) ? '' :\n\t\t\t\t\t\t\t\t' category=\"' + selectedCategories.join(',') + '\"';\n\n\t\t\t\t\t\t\tlet tag_field = (0 === selectedTags.length) ? '' :\n\t\t\t\t\t\t\t\t' tag=\"' + selectedTags.join(',') + '\"';\n\n\t\t\t\t\t\t\tlet events_field = (e.data.events_by_cat_events_count_field !== '0') ?\n\t\t\t\t\t\t\t\t' events=\"' + e.data.events_by_cat_events_count_field + '\"' : '';\n\n\t\t\t\t\t\t\teditor.insertContent('[calendarp-events-list' + category_field + tag_field + events_field + ']');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: ed.getLang('calendarp_l10n.single_event_title'),\n\t\t\t\tonclick: function () {\n\t\t\t\t\teditor.windowManager.open({\n\t\t\t\t\t\ttitle: ed.getLang('calendarp_l10n.single_event_title'),\n\t\t\t\t\t\tbody: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'textbox',\n\t\t\t\t\t\t\t\tname: 'event_title',\n\t\t\t\t\t\t\t\tclasses: 'event-title-field',\n\t\t\t\t\t\t\t\tlabel: ed.getLang('calendarp_l10n.search_event'),\n\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\tsize: 25\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'textbox',\n\t\t\t\t\t\t\t\tname: 'event_id',\n\t\t\t\t\t\t\t\tclasses: 'event-id-field',\n\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonopen: function (e) {\n\t\t\t\t\t\t\tlet $el = jQuery(e.target.$el.find('.mce-event-title-field'));\n\t\t\t\t\t\t\t// Set a placeholder\n\t\t\t\t\t\t\t$el.attr('placeholder', ed.getLang('calendarp_l10n.search_event_by_title'));\n\t\t\t\t\t\t\tlet $idField = jQuery(e.target.$el.find('.mce-event-id-field'));\n\t\t\t\t\t\t\t$el.autocomplete({\n\t\t\t\t\t\t\t\tsource: function (request, response) {\n\t\t\t\t\t\t\t\t\tlet eventApi = new wp.api.collections.Calendar_event();\n\t\t\t\t\t\t\t\t\teventApi\n\t\t\t\t\t\t\t\t\t\t.fetch({data: {search: request.term}})\n\t\t\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\t\t\tlet dataLength = data.length,\n\t\t\t\t\t\t\t\t\t\t\t\tparsedData = [],\n\t\t\t\t\t\t\t\t\t\t\t\ti;\n\n\t\t\t\t\t\t\t\t\t\t\tfor (i = 0; i < dataLength; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\tparsedData.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: data[i].id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t// HTML is expected in title, just get the text\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: jQuery('<span />').html(data[i].title.rendered).text()\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Return the data to autocomplete\n\t\t\t\t\t\t\t\t\t\t\tresponse(parsedData);\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tappendTo: $el.parent(),\n\t\t\t\t\t\t\t\tsearch: function () {\n\t\t\t\t\t\t\t\t\t$idField.val('');\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tselect: function (event, ui) {\n\t\t\t\t\t\t\t\t\t$idField.val(ui.item.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonsubmit: function (e) {\n\t\t\t\t\t\t\tlet event_id_field;\n\t\t\t\t\t\t\tif (e.data.event_id != 'all')\n\t\t\t\t\t\t\t\tevent_id_field = ' event_id=\"' + e.data.event_id + '\"';\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tevent_id_field = '';\n\n\t\t\t\t\t\t\teditor.insertContent('[calendarp-event' + event_id_field + ']');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\teditor.addButton('calendarp_shortcodes', {\n\t\t\ticon: 'mce-i-calendarp',\n\t\t\tmenu: calendarp_menu,\n\t\t\ttype: 'menubutton'\n\t\t});\n\t});\n\n\n})(jQuery);\n"],"sourceRoot":""}