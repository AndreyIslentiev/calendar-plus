!function(g){var I={};function C(A){if(I[A])return I[A].exports;var c=I[A]={i:A,l:!1,exports:{}};return g[A].call(c.exports,c,c.exports,C),c.l=!0,c.exports}C.m=g,C.c=I,C.d=function(g,I,A){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var c in g)C.d(A,c,function(I){return g[I]}.bind(null,c));return A},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=13)}({13:function(module,exports){eval("const {registerBlockType} = wp.blocks;\r\nconst {createElement, useState} = wp.element;\r\nconst {__} = wp.i18n;\r\nconst {InspectorControls} = wp.editor;\r\nconst {\r\n    TextControl,\r\n    RangeControl,\r\n    SelectControl,\r\n    ServerSideRender,\r\n    PanelBody,\r\n    __experimentalHeading,\r\n    __experimentalView,\r\n    __experimentalSpacer,\r\n    __experimentalScrollable,\r\n    __experimentalVStack,\r\n    CheckboxControl,\r\n    SearchControl,\r\n    ToggleControl\r\n} = wp.components;\r\nconst {withSelect} = window.wp.data;\r\n\r\nconst CategorySelect = function(props) {\r\n    const [ searchText, setSearchText ] = useState('');\r\n    const categories = props.categories ? props.categories : [];\r\n    const [ items, setItems ] = useState(categories);\r\n    const selected = props.selected ? props.selected : [];\r\n\r\n    const list = [];\r\n    for (const item of items) {\r\n\r\n        list.push(\r\n            createElement(\r\n                CheckboxControl,\r\n                {\r\n                    label: item.label,\r\n                    checked: selected.indexOf( item.value ) !== -1 ,\r\n                    key: item.label,\r\n                    style: { marginBottom: 5 },\r\n                    onChange: function(value) {\r\n                        if ( props.onSelect ) {\r\n                            props.onSelect( item.value, value );\r\n                        }\r\n                    }\r\n                }\r\n            ),\r\n        );\r\n    }\r\n    var elements = [\r\n        createElement(\r\n            __experimentalSpacer,\r\n            { marginBottom: 5 },\r\n            createElement(\r\n                SearchControl,\r\n                {\r\n                    value: searchText,\r\n                    onChange: function(value) {\r\n                        const filtered = props.categories.filter(function(item){\r\n                            return item.label.toLowerCase().indexOf(value) !== -1;\r\n                        });\r\n                        setItems(filtered);\r\n                        setSearchText(value);\r\n                    }\r\n                }\r\n            ),\r\n        ),\r\n        createElement(\r\n            __experimentalScrollable,\r\n            {\r\n                style: { maxHeight: 200 }\r\n            },\r\n            createElement(__experimentalVStack, {}, list)\r\n        )\r\n    ];\r\n    if ( props.label ) {\r\n        elements.unshift(\r\n            createElement(\r\n                __experimentalSpacer,\r\n                { marginBottom: 5 },\r\n                createElement( __experimentalHeading, { level: 5 }, props.label )\r\n            )\r\n        );\r\n    }\r\n\r\n     return createElement(\r\n         __experimentalSpacer,\r\n         { marginBottom: 10 },\r\n         createElement(__experimentalView, {}, elements)\r\n     );\r\n}\r\n\r\nregisterBlockType( 'calendar-plus/calendar', {\r\n    title: __( 'Events Calendar' ),\r\n    description: __( 'Displays full events calendar.' ),\r\n    category:  'widgets',\r\n    icon: {\r\n        src: 'calendar-alt',\r\n    },\r\n    attributes: {\r\n        category: {},\r\n        time_format: {},\r\n        dow_format: {},\r\n        month_name_format: {},\r\n        day_format: {},\r\n        date_format: {}\r\n    },\r\n    edit: withSelect( function( select ) {\r\n        return {\r\n            categories: select('core').getEntityRecords('taxonomy', 'calendar_event_category', {per_page: -1})\r\n        };\r\n    } )( function( props ) {\r\n        var categoryOptions = [ { value: '', label: __( 'All' ) } ];\r\n        \r\n        if( props.categories ) {\r\n            props.categories.forEach((category) => {\r\n                categoryOptions.push({value:category.id, label:category.name});\r\n            });\r\n        }\r\n        \r\n        return createElement('div', {}, [\r\n            createElement( 'div', {}, createElement( 'img', {src: CalPlusBlocksOptions.calendar_image} ) ),\r\n            createElement( InspectorControls, {},\r\n                createElement( PanelBody, { title: __( 'Calendar Settings' ), initialOpen: true },\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.category,\r\n                        label: __( 'Category' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { category: value } );\r\n                        },\r\n                        options: categoryOptions\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.time_format,\r\n                        label: __( 'Time format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { time_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'g:i a', label: '11:00 pm'},\r\n                            {value: 'H:i', label: '23:00'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.dow_format,\r\n                        label: __( 'Day of the week format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { dow_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'l', label: 'Sunday'},\r\n                            {value: 'D', label: 'Sun'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.month_name_format,\r\n                        label: __( 'Month name format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { month_name_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'M', label: 'Jan'},\r\n                            {value: 'F', label: 'January'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.day_format,\r\n                        label: __( 'Day format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { day_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'd', label: '09'},\r\n                            {value: 'j', label: '9'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.date_format,\r\n                        label: __( 'Date format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { date_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'd/m', label: '15/09'},\r\n                            {value: 'j/n', label: '15/9'},\r\n                            {value: 'm/d', label: '09/15'},\r\n                            {value: 'n/j', label: '9/15'},\r\n                        ]\r\n                    }),\r\n                )\r\n            )\r\n        ] )\r\n    } ),\r\n    save(){\r\n        return null;\r\n    }\r\n});\r\n\r\nregisterBlockType( 'calendar-plus/event', {\r\n    title: __( 'Single Event' ),\r\n    description: __( 'Displays single calendar event.' ),\r\n    category:  'widgets',\r\n    icon: {\r\n        src: 'calendar-alt',\r\n    },\r\n    attributes: {\r\n        event_id: {},\r\n    },\r\n    edit(props){\r\n        return createElement('div', {}, [\r\n            createElement( 'div', {}, createElement( ServerSideRender, {\r\n                block: \"calendar-plus/event\",\r\n                attributes: props.attributes,\r\n                EmptyResponsePlaceholder: function() {\r\n                    return createElement( 'div', {}, 'test' );\r\n                }\r\n            } ) ),\r\n            createElement( InspectorControls, {},\r\n                createElement( PanelBody, { title: __( 'Event Settings' ), initialOpen: true },\r\n                    createElement(TextControl, {\r\n                        value: props.attributes.event_id,\r\n                        label: __( 'Event Id' ),\r\n                        help: __( 'Use Events > Events on admin area to search for your event by title or ID' ),\r\n                        type: 'number',\r\n                        onChange: function(value){\r\n                            props.setAttributes( { event_id: value } );\r\n                        },\r\n                    }),\r\n                )\r\n            )\r\n        ] )\r\n    },\r\n    save(){\r\n        return null;\r\n    }\r\n});\r\n\r\nregisterBlockType( 'calendar-plus/events-list', {\r\n    title: __( 'Events List' ),\r\n    description: __( 'Displays events list.' ),\r\n    category:  'widgets',\r\n    icon: {\r\n        src: 'calendar-alt',\r\n    },\r\n    attributes: {\r\n        events: {\r\n            default: 5\r\n        },\r\n        past_events: {\r\n            default: false\r\n        },\r\n        category: {\r\n            default: ''\r\n        },\r\n        display_location: {\r\n            type: 'boolean',\r\n            default: false\r\n        },\r\n        display_excerpt: {\r\n            type: 'boolean',\r\n            default: false\r\n        },\r\n    },\r\n    edit: withSelect( function( select ) {\r\n        return {\r\n            categories: select('core').getEntityRecords('taxonomy', 'calendar_event_category', {per_page: -1})\r\n        };\r\n    } )( function( props ) {\r\n        var categoryOptions = [ { value: 0, label: __( 'All' ) } ];\r\n        var selectedCategories = props.attributes.category\r\n            .split( ',' )\r\n            .map(\r\n                function( value ){\r\n                    return parseInt( value.trim() );\r\n                }\r\n            )\r\n            .filter(\r\n                function(num) {\r\n                    return ! isNaN( num );\r\n                }\r\n            );\r\n\r\n        if( props.categories ) {\r\n            props.categories.forEach((category) => {\r\n                categoryOptions.push({value:category.id, label:category.name});\r\n            });\r\n        }\r\n        \r\n        return createElement('div', {}, [\r\n            createElement( 'div', {}, createElement( ServerSideRender, {\r\n                block: \"calendar-plus/events-list\",\r\n                attributes: props.attributes,\r\n            } ) ),\r\n            createElement( InspectorControls, {},\r\n                createElement( PanelBody, { title: __( 'Events Settings' ), initialOpen: true },\r\n                    createElement(\r\n                        CategorySelect,\r\n                        {\r\n                            label: __( 'Category' ),\r\n                            categories: categoryOptions,\r\n                            selected: selectedCategories,\r\n                            onSelect: function(id, value) {\r\n                                if ( ! id ) {\r\n                                    if ( value ) {\r\n                                        selectedCategories = props.categories.map(\r\n                                            function( item ) {\r\n                                                return item.id;\r\n                                            }\r\n                                        );\r\n                                        selectedCategories.push( 0 );\r\n                                        props.setAttributes( { category: selectedCategories.join( ',' ) } );\r\n                                    } else {\r\n                                        props.setAttributes( { category: '' } );\r\n                                    }\r\n\r\n\r\n                                    return;\r\n                                }\r\n\r\n                                const index = selectedCategories.indexOf( id );\r\n\r\n                                if ( value && index === -1 ) {\r\n                                    selectedCategories.push( id );\r\n                                } else if ( index !== -1 ) {\r\n                                    delete selectedCategories[ index ];\r\n                                }\r\n                                props.setAttributes( {\r\n                                    category: selectedCategories.join( ',' )\r\n                                } );\r\n                            }\r\n                        }\r\n                    ),\r\n                    createElement(RangeControl, {\r\n                        value: props.attributes.events,\r\n                        label: __( 'Number of events' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { events: value } );\r\n                        },\r\n                        min: 1,\r\n                        max: 100,\r\n                    }),\r\n\t\t\t\t\tcreateElement(ToggleControl, {\r\n\t\t\t\t\t\tvalue: props.attributes.past_events,\r\n\t\t\t\t\t\tchecked: props.attributes.past_events,\r\n\t\t\t\t\t\tlabel: __( 'Display past events' ),\r\n\t\t\t\t\t\tonChange: function(value){\r\n\t\t\t\t\t\t\tprops.setAttributes( { past_events: value } );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\r\n                    createElement(__experimentalView, {}, [\r\n                        createElement(\r\n                            __experimentalSpacer,\r\n                            {},\r\n                            createElement(\r\n                                __experimentalHeading,\r\n                                { level: 5 },\r\n                                __( 'Choose fields to display' )\r\n                            ),\r\n                        ),\r\n                        createElement(\r\n                            CheckboxControl,\r\n                            {\r\n                                label: __( 'Location' ),\r\n                                checked: props.attributes.display_location,\r\n                                onChange: function(value) {\r\n                                    props.setAttributes( { display_location: value } );\r\n                                }\r\n                            }\r\n                        ),\r\n                        createElement(\r\n                            CheckboxControl,\r\n                            {\r\n                                label: __( 'Excerpt' ),\r\n                                checked: props.attributes.display_excerpt,\r\n                                onChange: function(value) {\r\n                                    props.setAttributes( { display_excerpt: value } );\r\n                                }\r\n                            }\r\n                        ),\r\n                    ]),\r\n                )\r\n            )\r\n        ] )\r\n    } ),\r\n    save(){\r\n        return null;\r\n    }\r\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9fc3JjL2FkbWluL2VkaXRvci1zaG9ydGNvZGUvZWRpdG9yLWJsb2Nrcy5qcz85Mjc1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sa0JBQWtCO0FBQ3pCLE9BQU8sd0JBQXdCO0FBQy9CLE9BQU8sR0FBRztBQUNWLE9BQU8sa0JBQWtCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsT0FBTyxXQUFXOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsa0JBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixhQUFhO0FBQ2Isa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkMsdURBQXVELFdBQVc7QUFDbEU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLG1CQUFtQjtBQUM3Qiw2Q0FBNkM7QUFDN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQkFBb0I7QUFDcEIsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0Qiw2QkFBNkI7QUFDN0Isc0JBQXNCO0FBQ3RCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnR0FBZ0csYUFBYTtBQUM3RztBQUNBLEtBQUs7QUFDTCxpQ0FBaUMsZ0NBQWdD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCO0FBQ2xFLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscUJBQXFCO0FBQ2xEO0FBQ0EsTUFBTTs7QUFFTix3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0EsaUNBQWlDLFdBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDBCQUEwQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQseUJBQXlCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7cmVnaXN0ZXJCbG9ja1R5cGV9ID0gd3AuYmxvY2tzO1xyXG5jb25zdCB7Y3JlYXRlRWxlbWVudCwgdXNlU3RhdGV9ID0gd3AuZWxlbWVudDtcclxuY29uc3Qge19ffSA9IHdwLmkxOG47XHJcbmNvbnN0IHtJbnNwZWN0b3JDb250cm9sc30gPSB3cC5lZGl0b3I7XHJcbmNvbnN0IHtcclxuICAgIFRleHRDb250cm9sLFxyXG4gICAgUmFuZ2VDb250cm9sLFxyXG4gICAgU2VsZWN0Q29udHJvbCxcclxuICAgIFNlcnZlclNpZGVSZW5kZXIsXHJcbiAgICBQYW5lbEJvZHksXHJcbiAgICBfX2V4cGVyaW1lbnRhbEhlYWRpbmcsXHJcbiAgICBfX2V4cGVyaW1lbnRhbFZpZXcsXHJcbiAgICBfX2V4cGVyaW1lbnRhbFNwYWNlcixcclxuICAgIF9fZXhwZXJpbWVudGFsU2Nyb2xsYWJsZSxcclxuICAgIF9fZXhwZXJpbWVudGFsVlN0YWNrLFxyXG4gICAgQ2hlY2tib3hDb250cm9sLFxyXG4gICAgU2VhcmNoQ29udHJvbCxcclxuICAgIFRvZ2dsZUNvbnRyb2xcclxufSA9IHdwLmNvbXBvbmVudHM7XHJcbmNvbnN0IHt3aXRoU2VsZWN0fSA9IHdpbmRvdy53cC5kYXRhO1xyXG5cclxuY29uc3QgQ2F0ZWdvcnlTZWxlY3QgPSBmdW5jdGlvbihwcm9wcykge1xyXG4gICAgY29uc3QgWyBzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0IF0gPSB1c2VTdGF0ZSgnJyk7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gcHJvcHMuY2F0ZWdvcmllcyA/IHByb3BzLmNhdGVnb3JpZXMgOiBbXTtcclxuICAgIGNvbnN0IFsgaXRlbXMsIHNldEl0ZW1zIF0gPSB1c2VTdGF0ZShjYXRlZ29yaWVzKTtcclxuICAgIGNvbnN0IHNlbGVjdGVkID0gcHJvcHMuc2VsZWN0ZWQgPyBwcm9wcy5zZWxlY3RlZCA6IFtdO1xyXG5cclxuICAgIGNvbnN0IGxpc3QgPSBbXTtcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xyXG5cclxuICAgICAgICBsaXN0LnB1c2goXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBDaGVja2JveENvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogc2VsZWN0ZWQuaW5kZXhPZiggaXRlbS52YWx1ZSApICE9PSAtMSAsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IG1hcmdpbkJvdHRvbTogNSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByb3BzLm9uU2VsZWN0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMub25TZWxlY3QoIGl0ZW0udmFsdWUsIHZhbHVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIHZhciBlbGVtZW50cyA9IFtcclxuICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICBfX2V4cGVyaW1lbnRhbFNwYWNlcixcclxuICAgICAgICAgICAgeyBtYXJnaW5Cb3R0b206IDUgfSxcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIFNlYXJjaENvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlYXJjaFRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gcHJvcHMuY2F0ZWdvcmllcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW1zKGZpbHRlcmVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoVGV4dCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICksXHJcbiAgICAgICAgY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgX19leHBlcmltZW50YWxTY3JvbGxhYmxlLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXhIZWlnaHQ6IDIwMCB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoX19leHBlcmltZW50YWxWU3RhY2ssIHt9LCBsaXN0KVxyXG4gICAgICAgIClcclxuICAgIF07XHJcbiAgICBpZiAoIHByb3BzLmxhYmVsICkge1xyXG4gICAgICAgIGVsZW1lbnRzLnVuc2hpZnQoXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBfX2V4cGVyaW1lbnRhbFNwYWNlcixcclxuICAgICAgICAgICAgICAgIHsgbWFyZ2luQm90dG9tOiA1IH0sXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBfX2V4cGVyaW1lbnRhbEhlYWRpbmcsIHsgbGV2ZWw6IDUgfSwgcHJvcHMubGFiZWwgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgIF9fZXhwZXJpbWVudGFsU3BhY2VyLFxyXG4gICAgICAgICB7IG1hcmdpbkJvdHRvbTogMTAgfSxcclxuICAgICAgICAgY3JlYXRlRWxlbWVudChfX2V4cGVyaW1lbnRhbFZpZXcsIHt9LCBlbGVtZW50cylcclxuICAgICApO1xyXG59XHJcblxyXG5yZWdpc3RlckJsb2NrVHlwZSggJ2NhbGVuZGFyLXBsdXMvY2FsZW5kYXInLCB7XHJcbiAgICB0aXRsZTogX18oICdFdmVudHMgQ2FsZW5kYXInICksXHJcbiAgICBkZXNjcmlwdGlvbjogX18oICdEaXNwbGF5cyBmdWxsIGV2ZW50cyBjYWxlbmRhci4nICksXHJcbiAgICBjYXRlZ29yeTogICd3aWRnZXRzJyxcclxuICAgIGljb246IHtcclxuICAgICAgICBzcmM6ICdjYWxlbmRhci1hbHQnLFxyXG4gICAgfSxcclxuICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICBjYXRlZ29yeToge30sXHJcbiAgICAgICAgdGltZV9mb3JtYXQ6IHt9LFxyXG4gICAgICAgIGRvd19mb3JtYXQ6IHt9LFxyXG4gICAgICAgIG1vbnRoX25hbWVfZm9ybWF0OiB7fSxcclxuICAgICAgICBkYXlfZm9ybWF0OiB7fSxcclxuICAgICAgICBkYXRlX2Zvcm1hdDoge31cclxuICAgIH0sXHJcbiAgICBlZGl0OiB3aXRoU2VsZWN0KCBmdW5jdGlvbiggc2VsZWN0ICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNhdGVnb3JpZXM6IHNlbGVjdCgnY29yZScpLmdldEVudGl0eVJlY29yZHMoJ3RheG9ub215JywgJ2NhbGVuZGFyX2V2ZW50X2NhdGVnb3J5Jywge3Blcl9wYWdlOiAtMX0pXHJcbiAgICAgICAgfTtcclxuICAgIH0gKSggZnVuY3Rpb24oIHByb3BzICkge1xyXG4gICAgICAgIHZhciBjYXRlZ29yeU9wdGlvbnMgPSBbIHsgdmFsdWU6ICcnLCBsYWJlbDogX18oICdBbGwnICkgfSBdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCBwcm9wcy5jYXRlZ29yaWVzICkge1xyXG4gICAgICAgICAgICBwcm9wcy5jYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnMucHVzaCh7dmFsdWU6Y2F0ZWdvcnkuaWQsIGxhYmVsOmNhdGVnb3J5Lm5hbWV9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KCdkaXYnLCB7fSwgW1xyXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCAnZGl2Jywge30sIGNyZWF0ZUVsZW1lbnQoICdpbWcnLCB7c3JjOiBDYWxQbHVzQmxvY2tzT3B0aW9ucy5jYWxlbmRhcl9pbWFnZX0gKSApLFxyXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBJbnNwZWN0b3JDb250cm9scywge30sXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBQYW5lbEJvZHksIHsgdGl0bGU6IF9fKCAnQ2FsZW5kYXIgU2V0dGluZ3MnICksIGluaXRpYWxPcGVuOiB0cnVlIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChTZWxlY3RDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdDYXRlZ29yeScgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgY2F0ZWdvcnk6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogY2F0ZWdvcnlPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChTZWxlY3RDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLnRpbWVfZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdUaW1lIGZvcm1hdCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgdGltZV9mb3JtYXQ6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnZzppIGEnLCBsYWJlbDogJzExOjAwIHBtJ30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdIOmknLCBsYWJlbDogJzIzOjAwJ30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuZG93X2Zvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnRGF5IG9mIHRoZSB3ZWVrIGZvcm1hdCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZG93X2Zvcm1hdDogdmFsdWUgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdsJywgbGFiZWw6ICdTdW5kYXknfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ0QnLCBsYWJlbDogJ1N1bid9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChTZWxlY3RDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLm1vbnRoX25hbWVfZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdNb250aCBuYW1lIGZvcm1hdCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgbW9udGhfbmFtZV9mb3JtYXQ6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnTScsIGxhYmVsOiAnSmFuJ30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdGJywgbGFiZWw6ICdKYW51YXJ5J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuZGF5X2Zvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnRGF5IGZvcm1hdCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZGF5X2Zvcm1hdDogdmFsdWUgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdkJywgbGFiZWw6ICcwOSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnaicsIGxhYmVsOiAnOSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChTZWxlY3RDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmRhdGVfZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdEYXRlIGZvcm1hdCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZGF0ZV9mb3JtYXQ6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnZC9tJywgbGFiZWw6ICcxNS8wOSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnai9uJywgbGFiZWw6ICcxNS85J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdtL2QnLCBsYWJlbDogJzA5LzE1J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICduL2onLCBsYWJlbDogJzkvMTUnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgXSApXHJcbiAgICB9ICksXHJcbiAgICBzYXZlKCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxucmVnaXN0ZXJCbG9ja1R5cGUoICdjYWxlbmRhci1wbHVzL2V2ZW50Jywge1xyXG4gICAgdGl0bGU6IF9fKCAnU2luZ2xlIEV2ZW50JyApLFxyXG4gICAgZGVzY3JpcHRpb246IF9fKCAnRGlzcGxheXMgc2luZ2xlIGNhbGVuZGFyIGV2ZW50LicgKSxcclxuICAgIGNhdGVnb3J5OiAgJ3dpZGdldHMnLFxyXG4gICAgaWNvbjoge1xyXG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXHJcbiAgICB9LFxyXG4gICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgIGV2ZW50X2lkOiB7fSxcclxuICAgIH0sXHJcbiAgICBlZGl0KHByb3BzKXtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnZGl2Jywge30sIFtcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggJ2RpdicsIHt9LCBjcmVhdGVFbGVtZW50KCBTZXJ2ZXJTaWRlUmVuZGVyLCB7XHJcbiAgICAgICAgICAgICAgICBibG9jazogXCJjYWxlbmRhci1wbHVzL2V2ZW50XCIsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICAgICAgRW1wdHlSZXNwb25zZVBsYWNlaG9sZGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCggJ2RpdicsIHt9LCAndGVzdCcgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSApICksXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIEluc3BlY3RvckNvbnRyb2xzLCB7fSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIFBhbmVsQm9keSwgeyB0aXRsZTogX18oICdFdmVudCBTZXR0aW5ncycgKSwgaW5pdGlhbE9wZW46IHRydWUgfSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFRleHRDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmV2ZW50X2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdFdmVudCBJZCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVscDogX18oICdVc2UgRXZlbnRzID4gRXZlbnRzIG9uIGFkbWluIGFyZWEgdG8gc2VhcmNoIGZvciB5b3VyIGV2ZW50IGJ5IHRpdGxlIG9yIElEJyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZXZlbnRfaWQ6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIF0gKVxyXG4gICAgfSxcclxuICAgIHNhdmUoKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufSk7XHJcblxyXG5yZWdpc3RlckJsb2NrVHlwZSggJ2NhbGVuZGFyLXBsdXMvZXZlbnRzLWxpc3QnLCB7XHJcbiAgICB0aXRsZTogX18oICdFdmVudHMgTGlzdCcgKSxcclxuICAgIGRlc2NyaXB0aW9uOiBfXyggJ0Rpc3BsYXlzIGV2ZW50cyBsaXN0LicgKSxcclxuICAgIGNhdGVnb3J5OiAgJ3dpZGdldHMnLFxyXG4gICAgaWNvbjoge1xyXG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXHJcbiAgICB9LFxyXG4gICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiA1XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXN0X2V2ZW50czoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2F0ZWdvcnk6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogJydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc3BsYXlfbG9jYXRpb246IHtcclxuICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGlzcGxheV9leGNlcnB0OiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJyxcclxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGVkaXQ6IHdpdGhTZWxlY3QoIGZ1bmN0aW9uKCBzZWxlY3QgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2F0ZWdvcmllczogc2VsZWN0KCdjb3JlJykuZ2V0RW50aXR5UmVjb3JkcygndGF4b25vbXknLCAnY2FsZW5kYXJfZXZlbnRfY2F0ZWdvcnknLCB7cGVyX3BhZ2U6IC0xfSlcclxuICAgICAgICB9O1xyXG4gICAgfSApKCBmdW5jdGlvbiggcHJvcHMgKSB7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5T3B0aW9ucyA9IFsgeyB2YWx1ZTogMCwgbGFiZWw6IF9fKCAnQWxsJyApIH0gXTtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRDYXRlZ29yaWVzID0gcHJvcHMuYXR0cmlidXRlcy5jYXRlZ29yeVxyXG4gICAgICAgICAgICAuc3BsaXQoICcsJyApXHJcbiAgICAgICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiggdmFsdWUgKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoIHZhbHVlLnRyaW0oKSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihudW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gISBpc05hTiggbnVtICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmKCBwcm9wcy5jYXRlZ29yaWVzICkge1xyXG4gICAgICAgICAgICBwcm9wcy5jYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnMucHVzaCh7dmFsdWU6Y2F0ZWdvcnkuaWQsIGxhYmVsOmNhdGVnb3J5Lm5hbWV9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KCdkaXYnLCB7fSwgW1xyXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCAnZGl2Jywge30sIGNyZWF0ZUVsZW1lbnQoIFNlcnZlclNpZGVSZW5kZXIsIHtcclxuICAgICAgICAgICAgICAgIGJsb2NrOiBcImNhbGVuZGFyLXBsdXMvZXZlbnRzLWxpc3RcIixcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHByb3BzLmF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICAgIH0gKSApLFxyXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBJbnNwZWN0b3JDb250cm9scywge30sXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KCBQYW5lbEJvZHksIHsgdGl0bGU6IF9fKCAnRXZlbnRzIFNldHRpbmdzJyApLCBpbml0aWFsT3BlbjogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3J5U2VsZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdDYXRlZ29yeScgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3J5T3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZENhdGVnb3JpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdDogZnVuY3Rpb24oaWQsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIGlkICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXRlZ29yaWVzID0gcHJvcHMuY2F0ZWdvcmllcy5tYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGl0ZW0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhdGVnb3JpZXMucHVzaCggMCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBjYXRlZ29yeTogc2VsZWN0ZWRDYXRlZ29yaWVzLmpvaW4oICcsJyApIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgY2F0ZWdvcnk6ICcnIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc2VsZWN0ZWRDYXRlZ29yaWVzLmluZGV4T2YoIGlkICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdmFsdWUgJiYgaW5kZXggPT09IC0xICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhdGVnb3JpZXMucHVzaCggaWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBpbmRleCAhPT0gLTEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxlY3RlZENhdGVnb3JpZXNbIGluZGV4IF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHNlbGVjdGVkQ2F0ZWdvcmllcy5qb2luKCAnLCcgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChSYW5nZUNvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuZXZlbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdOdW1iZXIgb2YgZXZlbnRzJyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBldmVudHM6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuXHRcdFx0XHRcdGNyZWF0ZUVsZW1lbnQoVG9nZ2xlQ29udHJvbCwge1xyXG5cdFx0XHRcdFx0XHR2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5wYXN0X2V2ZW50cyxcclxuXHRcdFx0XHRcdFx0Y2hlY2tlZDogcHJvcHMuYXR0cmlidXRlcy5wYXN0X2V2ZW50cyxcclxuXHRcdFx0XHRcdFx0bGFiZWw6IF9fKCAnRGlzcGxheSBwYXN0IGV2ZW50cycgKSxcclxuXHRcdFx0XHRcdFx0b25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuXHRcdFx0XHRcdFx0XHRwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IHBhc3RfZXZlbnRzOiB2YWx1ZSB9ICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KF9fZXhwZXJpbWVudGFsVmlldywge30sIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fZXhwZXJpbWVudGFsU3BhY2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fZXhwZXJpbWVudGFsSGVhZGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxldmVsOiA1IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX18oICdDaG9vc2UgZmllbGRzIHRvIGRpc3BsYXknIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveENvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnTG9jYXRpb24nICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogcHJvcHMuYXR0cmlidXRlcy5kaXNwbGF5X2xvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGRpc3BsYXlfbG9jYXRpb246IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveENvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnRXhjZXJwdCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBwcm9wcy5hdHRyaWJ1dGVzLmRpc3BsYXlfZXhjZXJwdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBkaXNwbGF5X2V4Y2VycHQ6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBdIClcclxuICAgIH0gKSxcclxuICAgIHNhdmUoKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n")}});