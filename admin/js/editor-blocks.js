!function(g){var I={};function C(A){if(I[A])return I[A].exports;var e=I[A]={i:A,l:!1,exports:{}};return g[A].call(e.exports,e,e.exports,C),e.l=!0,e.exports}C.m=g,C.c=I,C.d=function(g,I,A){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var e in g)C.d(A,e,function(I){return g[I]}.bind(null,e));return A},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=9)}({9:function(module,exports){eval("const {registerBlockType} = wp.blocks;\r\nconst {createElement, useState} = wp.element;\r\nconst {__} = wp.i18n;\r\nconst {InspectorControls} = wp.editor;\r\nconst {\r\n    TextControl,\r\n    RangeControl,\r\n    SelectControl,\r\n    ServerSideRender,\r\n    PanelBody,\r\n    __experimentalHeading,\r\n    __experimentalView,\r\n    __experimentalSpacer,\r\n    __experimentalScrollable,\r\n    __experimentalVStack,\r\n    CheckboxControl,\r\n    SearchControl\r\n} = wp.components;\r\nconst {withSelect} = window.wp.data;\r\n\r\nconst CategorySelect = function(props) {\r\n    const [ searchText, setSearchText ] = useState('');\r\n    const categories = props.categories ? props.categories : [];\r\n    const [ items, setItems ] = useState(categories);\r\n    const selected = props.selected ? props.selected : [];\r\n\r\n    const list = [];\r\n    for (const item of items) {\r\n\r\n        list.push(\r\n            createElement(\r\n                CheckboxControl,\r\n                {\r\n                    label: item.label,\r\n                    checked: selected.indexOf( item.value ) !== -1 ,\r\n                    key: item.label,\r\n                    style: { marginBottom: 5 },\r\n                    onChange: function(value) {\r\n                        if ( props.onSelect ) {\r\n                            props.onSelect( item.value, value );\r\n                        }\r\n                    }\r\n                }\r\n            ),\r\n        );\r\n    }\r\n    var elements = [\r\n        createElement(\r\n            __experimentalSpacer,\r\n            { marginBottom: 5 },\r\n            createElement(\r\n                SearchControl,\r\n                {\r\n                    value: searchText,\r\n                    onChange: function(value) {\r\n                        const filtered = props.categories.filter(function(item){\r\n                            return item.label.toLowerCase().indexOf(value) !== -1;\r\n                        });\r\n                        setItems(filtered);\r\n                        setSearchText(value);\r\n                    }\r\n                }\r\n            ),\r\n        ),\r\n        createElement(\r\n            __experimentalScrollable,\r\n            {\r\n                style: { maxHeight: 200 }\r\n            },\r\n            createElement(__experimentalVStack, {}, list)\r\n        )\r\n    ];\r\n    if ( props.label ) {\r\n        elements.unshift(\r\n            createElement(\r\n                __experimentalSpacer,\r\n                { marginBottom: 5 },\r\n                createElement( __experimentalHeading, { level: 5 }, props.label )\r\n            )\r\n        );\r\n    }\r\n\r\n     return createElement(\r\n         __experimentalSpacer,\r\n         { marginBottom: 10 },\r\n         createElement(__experimentalView, {}, elements)\r\n     );\r\n}\r\n\r\nregisterBlockType( 'calendar-plus/calendar', {\r\n    title: __( 'Events Calendar' ),\r\n    description: __( 'Displays full events calendar.' ),\r\n    category:  'widgets',\r\n    icon: {\r\n        src: 'calendar-alt',\r\n    },\r\n    attributes: {\r\n        category: {},\r\n        time_format: {},\r\n        dow_format: {},\r\n        month_name_format: {},\r\n        day_format: {},\r\n        date_format: {}\r\n    },\r\n    edit: withSelect( function( select ) {\r\n        return {\r\n            categories: select('core').getEntityRecords('taxonomy', 'calendar_event_category', {per_page: -1})\r\n        };\r\n    } )( function( props ) {\r\n        var categoryOptions = [ { value: '', label: __( 'All' ) } ];\r\n        \r\n        if( props.categories ) {\r\n            props.categories.forEach((category) => {\r\n                categoryOptions.push({value:category.id, label:category.name});\r\n            });\r\n        }\r\n        \r\n        return createElement('div', {}, [\r\n            createElement( 'div', {}, createElement( 'img', {src: CalPlusBlocksOptions.calendar_image} ) ),\r\n            createElement( InspectorControls, {},\r\n                createElement( PanelBody, { title: __( 'Calendar Settings' ), initialOpen: true },\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.category,\r\n                        label: __( 'Category' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { category: value } );\r\n                        },\r\n                        options: categoryOptions\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.time_format,\r\n                        label: __( 'Time format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { time_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'g:i a', label: '11:00 pm'},\r\n                            {value: 'H:i', label: '23:00'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.dow_format,\r\n                        label: __( 'Day of the week format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { dow_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'l', label: 'Sunday'},\r\n                            {value: 'D', label: 'Sun'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.month_name_format,\r\n                        label: __( 'Month name format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { month_name_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'M', label: 'Jan'},\r\n                            {value: 'F', label: 'January'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.day_format,\r\n                        label: __( 'Day format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { day_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'd', label: '09'},\r\n                            {value: 'j', label: '9'},\r\n                        ]\r\n                    }),\r\n                    createElement(SelectControl, {\r\n                        value: props.attributes.date_format,\r\n                        label: __( 'Date format' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { date_format: value } );\r\n                        },\r\n                        options: [\r\n                            {value: 'd/m', label: '15/09'},\r\n                            {value: 'j/n', label: '15/9'},\r\n                            {value: 'm/d', label: '09/15'},\r\n                            {value: 'n/j', label: '9/15'},\r\n                        ]\r\n                    }),\r\n                )\r\n            )\r\n        ] )\r\n    } ),\r\n    save(){\r\n        return null;\r\n    }\r\n});\r\n\r\nregisterBlockType( 'calendar-plus/event', {\r\n    title: __( 'Single Event' ),\r\n    description: __( 'Displays single calendar event.' ),\r\n    category:  'widgets',\r\n    icon: {\r\n        src: 'calendar-alt',\r\n    },\r\n    attributes: {\r\n        event_id: {},\r\n    },\r\n    edit(props){\r\n        return createElement('div', {}, [\r\n            createElement( 'div', {}, createElement( ServerSideRender, {\r\n                block: \"calendar-plus/event\",\r\n                attributes: props.attributes,\r\n                EmptyResponsePlaceholder: createElement( 'div', {}, 'test' )\r\n            } ) ),\r\n            createElement( InspectorControls, {},\r\n                createElement( PanelBody, { title: __( 'Event Settings' ), initialOpen: true },\r\n                    createElement(TextControl, {\r\n                        value: props.attributes.event_id,\r\n                        label: __( 'Event Id' ),\r\n                        help: __( 'Use Events > Events on admin area to search for your event by title or ID' ),\r\n                        type: 'number',\r\n                        onChange: function(value){\r\n                            props.setAttributes( { event_id: value } );\r\n                        },\r\n                    }),\r\n                )\r\n            )\r\n        ] )\r\n    },\r\n    save(){\r\n        return null;\r\n    }\r\n});\r\n\r\nregisterBlockType( 'calendar-plus/events-list', {\r\n    title: __( 'Events List' ),\r\n    description: __( 'Displays events list.' ),\r\n    category:  'widgets',\r\n    icon: {\r\n        src: 'calendar-alt',\r\n    },\r\n    attributes: {\r\n        events: {default: 5},\r\n        category: {\r\n            default: ''\r\n        },\r\n        display_location: {\r\n            type: 'boolean',\r\n            default: false\r\n        },\r\n        display_excerpt: {\r\n            type: 'boolean',\r\n            default: false\r\n        },\r\n    },\r\n    edit: withSelect( function( select ) {\r\n        return {\r\n            categories: select('core').getEntityRecords('taxonomy', 'calendar_event_category', {per_page: -1})\r\n        };\r\n    } )( function( props ) {\r\n        var categoryOptions = [ { value: 0, label: __( 'All' ) } ];\r\n        var selectedCategories = props.attributes.category\r\n            .split( ',' )\r\n            .map(\r\n                function( value ){\r\n                    return parseInt( value.trim() );\r\n                }\r\n            )\r\n            .filter(\r\n                function(num) {\r\n                    return ! isNaN( num );\r\n                }\r\n            );\r\n\r\n        if( props.categories ) {\r\n            props.categories.forEach((category) => {\r\n                categoryOptions.push({value:category.id, label:category.name});\r\n            });\r\n        }\r\n        \r\n        return createElement('div', {}, [\r\n            createElement( 'div', {}, createElement( ServerSideRender, {\r\n                block: \"calendar-plus/events-list\",\r\n                attributes: props.attributes,\r\n            } ) ),\r\n            createElement( InspectorControls, {},\r\n                createElement( PanelBody, { title: __( 'Events Settings' ), initialOpen: true },\r\n                    createElement(\r\n                        CategorySelect,\r\n                        {\r\n                            label: __( 'Category' ),\r\n                            categories: categoryOptions,\r\n                            selected: selectedCategories,\r\n                            onSelect: function(id, value) {\r\n                                if ( ! id ) {\r\n                                    if ( value ) {\r\n                                        selectedCategories = props.categories.map(\r\n                                            function( item ) {\r\n                                                return item.id;\r\n                                            }\r\n                                        );\r\n                                        selectedCategories.push( 0 );\r\n                                        props.setAttributes( { category: selectedCategories.join( ',' ) } );\r\n                                    } else {\r\n                                        props.setAttributes( { category: '' } );\r\n                                    }\r\n\r\n\r\n                                    return;\r\n                                }\r\n\r\n                                const index = selectedCategories.indexOf( id );\r\n\r\n                                if ( value && index === -1 ) {\r\n                                    selectedCategories.push( id );\r\n                                } else if ( index !== -1 ) {\r\n                                    delete selectedCategories[ index ];\r\n                                }\r\n                                props.setAttributes( {\r\n                                    category: selectedCategories.join( ',' )\r\n                                } );\r\n                            }\r\n                        }\r\n                    ),\r\n                    createElement(RangeControl, {\r\n                        value: props.attributes.events,\r\n                        label: __( 'Number of events' ),\r\n                        onChange: function(value){\r\n                            props.setAttributes( { events: value } );\r\n                        },\r\n                        min: 1,\r\n                        max: 100,\r\n                    }),\r\n                    createElement(__experimentalView, {}, [\r\n                        createElement(\r\n                            __experimentalSpacer,\r\n                            {},\r\n                            createElement(\r\n                                __experimentalHeading,\r\n                                { level: 5 },\r\n                                __( 'Choose fields to display' )\r\n                            ),\r\n                        ),\r\n                        createElement(\r\n                            CheckboxControl,\r\n                            {\r\n                                label: __( 'Location' ),\r\n                                checked: props.attributes.display_location,\r\n                                onChange: function(value) {\r\n                                    props.setAttributes( { display_location: value } );\r\n                                }\r\n                            }\r\n                        ),\r\n                        createElement(\r\n                            CheckboxControl,\r\n                            {\r\n                                label: __( 'Excerpt' ),\r\n                                checked: props.attributes.display_excerpt,\r\n                                onChange: function(value) {\r\n                                    props.setAttributes( { display_excerpt: value } );\r\n                                }\r\n                            }\r\n                        ),\r\n                    ]),\r\n                )\r\n            )\r\n        ] )\r\n    } ),\r\n    save(){\r\n        return null;\r\n    }\r\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9fc3JjL2FkbWluL2VkaXRvci1zaG9ydGNvZGUvZWRpdG9yLWJsb2Nrcy5qcz85Mjc1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sa0JBQWtCO0FBQ3pCLE9BQU8sd0JBQXdCO0FBQy9CLE9BQU8sR0FBRztBQUNWLE9BQU8sa0JBQWtCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE9BQU8sV0FBVzs7QUFFbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtCQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsYUFBYTtBQUNiLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DLHVEQUF1RCxXQUFXO0FBQ2xFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxtQkFBbUI7QUFDN0IsNkNBQTZDO0FBQzdDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CO0FBQ3BCLHVCQUF1QjtBQUN2QixzQkFBc0I7QUFDdEIsNkJBQTZCO0FBQzdCLHNCQUFzQjtBQUN0QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0dBQWdHLGFBQWE7QUFDN0c7QUFDQSxLQUFLO0FBQ0wsaUNBQWlDLGdDQUFnQzs7QUFF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Z0I7QUFDbEUseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLGlDQUFpQyxXQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCwwQkFBMEI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHlCQUF5QjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7cmVnaXN0ZXJCbG9ja1R5cGV9ID0gd3AuYmxvY2tzO1xyXG5jb25zdCB7Y3JlYXRlRWxlbWVudCwgdXNlU3RhdGV9ID0gd3AuZWxlbWVudDtcclxuY29uc3Qge19ffSA9IHdwLmkxOG47XHJcbmNvbnN0IHtJbnNwZWN0b3JDb250cm9sc30gPSB3cC5lZGl0b3I7XHJcbmNvbnN0IHtcclxuICAgIFRleHRDb250cm9sLFxyXG4gICAgUmFuZ2VDb250cm9sLFxyXG4gICAgU2VsZWN0Q29udHJvbCxcclxuICAgIFNlcnZlclNpZGVSZW5kZXIsXHJcbiAgICBQYW5lbEJvZHksXHJcbiAgICBfX2V4cGVyaW1lbnRhbEhlYWRpbmcsXHJcbiAgICBfX2V4cGVyaW1lbnRhbFZpZXcsXHJcbiAgICBfX2V4cGVyaW1lbnRhbFNwYWNlcixcclxuICAgIF9fZXhwZXJpbWVudGFsU2Nyb2xsYWJsZSxcclxuICAgIF9fZXhwZXJpbWVudGFsVlN0YWNrLFxyXG4gICAgQ2hlY2tib3hDb250cm9sLFxyXG4gICAgU2VhcmNoQ29udHJvbFxyXG59ID0gd3AuY29tcG9uZW50cztcclxuY29uc3Qge3dpdGhTZWxlY3R9ID0gd2luZG93LndwLmRhdGE7XHJcblxyXG5jb25zdCBDYXRlZ29yeVNlbGVjdCA9IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICBjb25zdCBbIHNlYXJjaFRleHQsIHNldFNlYXJjaFRleHQgXSA9IHVzZVN0YXRlKCcnKTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBwcm9wcy5jYXRlZ29yaWVzID8gcHJvcHMuY2F0ZWdvcmllcyA6IFtdO1xyXG4gICAgY29uc3QgWyBpdGVtcywgc2V0SXRlbXMgXSA9IHVzZVN0YXRlKGNhdGVnb3JpZXMpO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBwcm9wcy5zZWxlY3RlZCA/IHByb3BzLnNlbGVjdGVkIDogW107XHJcblxyXG4gICAgY29uc3QgbGlzdCA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcblxyXG4gICAgICAgIGxpc3QucHVzaChcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIENoZWNrYm94Q29udHJvbCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBzZWxlY3RlZC5pbmRleE9mKCBpdGVtLnZhbHVlICkgIT09IC0xICxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luQm90dG9tOiA1IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJvcHMub25TZWxlY3QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5vblNlbGVjdCggaXRlbS52YWx1ZSwgdmFsdWUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgdmFyIGVsZW1lbnRzID0gW1xyXG4gICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgIF9fZXhwZXJpbWVudGFsU3BhY2VyLFxyXG4gICAgICAgICAgICB7IG1hcmdpbkJvdHRvbTogNSB9LFxyXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgU2VhcmNoQ29udHJvbCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VhcmNoVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBwcm9wcy5jYXRlZ29yaWVzLmZpbHRlcihmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXRlbXMoZmlsdGVyZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hUZXh0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKSxcclxuICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICBfX2V4cGVyaW1lbnRhbFNjcm9sbGFibGUsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7IG1heEhlaWdodDogMjAwIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChfX2V4cGVyaW1lbnRhbFZTdGFjaywge30sIGxpc3QpXHJcbiAgICAgICAgKVxyXG4gICAgXTtcclxuICAgIGlmICggcHJvcHMubGFiZWwgKSB7XHJcbiAgICAgICAgZWxlbWVudHMudW5zaGlmdChcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIF9fZXhwZXJpbWVudGFsU3BhY2VyLFxyXG4gICAgICAgICAgICAgICAgeyBtYXJnaW5Cb3R0b206IDUgfSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIF9fZXhwZXJpbWVudGFsSGVhZGluZywgeyBsZXZlbDogNSB9LCBwcm9wcy5sYWJlbCApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgX19leHBlcmltZW50YWxTcGFjZXIsXHJcbiAgICAgICAgIHsgbWFyZ2luQm90dG9tOiAxMCB9LFxyXG4gICAgICAgICBjcmVhdGVFbGVtZW50KF9fZXhwZXJpbWVudGFsVmlldywge30sIGVsZW1lbnRzKVxyXG4gICAgICk7XHJcbn1cclxuXHJcbnJlZ2lzdGVyQmxvY2tUeXBlKCAnY2FsZW5kYXItcGx1cy9jYWxlbmRhcicsIHtcclxuICAgIHRpdGxlOiBfXyggJ0V2ZW50cyBDYWxlbmRhcicgKSxcclxuICAgIGRlc2NyaXB0aW9uOiBfXyggJ0Rpc3BsYXlzIGZ1bGwgZXZlbnRzIGNhbGVuZGFyLicgKSxcclxuICAgIGNhdGVnb3J5OiAgJ3dpZGdldHMnLFxyXG4gICAgaWNvbjoge1xyXG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXHJcbiAgICB9LFxyXG4gICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgIGNhdGVnb3J5OiB7fSxcclxuICAgICAgICB0aW1lX2Zvcm1hdDoge30sXHJcbiAgICAgICAgZG93X2Zvcm1hdDoge30sXHJcbiAgICAgICAgbW9udGhfbmFtZV9mb3JtYXQ6IHt9LFxyXG4gICAgICAgIGRheV9mb3JtYXQ6IHt9LFxyXG4gICAgICAgIGRhdGVfZm9ybWF0OiB7fVxyXG4gICAgfSxcclxuICAgIGVkaXQ6IHdpdGhTZWxlY3QoIGZ1bmN0aW9uKCBzZWxlY3QgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2F0ZWdvcmllczogc2VsZWN0KCdjb3JlJykuZ2V0RW50aXR5UmVjb3JkcygndGF4b25vbXknLCAnY2FsZW5kYXJfZXZlbnRfY2F0ZWdvcnknLCB7cGVyX3BhZ2U6IC0xfSlcclxuICAgICAgICB9O1xyXG4gICAgfSApKCBmdW5jdGlvbiggcHJvcHMgKSB7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5T3B0aW9ucyA9IFsgeyB2YWx1ZTogJycsIGxhYmVsOiBfXyggJ0FsbCcgKSB9IF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoIHByb3BzLmNhdGVnb3JpZXMgKSB7XHJcbiAgICAgICAgICAgIHByb3BzLmNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5T3B0aW9ucy5wdXNoKHt2YWx1ZTpjYXRlZ29yeS5pZCwgbGFiZWw6Y2F0ZWdvcnkubmFtZX0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHt9LCBbXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7fSwgY3JlYXRlRWxlbWVudCggJ2ltZycsIHtzcmM6IENhbFBsdXNCbG9ja3NPcHRpb25zLmNhbGVuZGFyX2ltYWdlfSApICksXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIEluc3BlY3RvckNvbnRyb2xzLCB7fSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIFBhbmVsQm9keSwgeyB0aXRsZTogX18oICdDYWxlbmRhciBTZXR0aW5ncycgKSwgaW5pdGlhbE9wZW46IHRydWUgfSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0NhdGVnb3J5JyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBjYXRlZ29yeTogdmFsdWUgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBjYXRlZ29yeU9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMudGltZV9mb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ1RpbWUgZm9ybWF0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyB0aW1lX2Zvcm1hdDogdmFsdWUgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdnOmkgYScsIGxhYmVsOiAnMTE6MDAgcG0nfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ0g6aScsIGxhYmVsOiAnMjM6MDAnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoU2VsZWN0Q29udHJvbCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5kb3dfZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdEYXkgb2YgdGhlIHdlZWsgZm9ybWF0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBkb3dfZm9ybWF0OiB2YWx1ZSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ2wnLCBsYWJlbDogJ1N1bmRheSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAnRCcsIGxhYmVsOiAnU3VuJ30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMubW9udGhfbmFtZV9mb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ01vbnRoIG5hbWUgZm9ybWF0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBtb250aF9uYW1lX2Zvcm1hdDogdmFsdWUgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdNJywgbGFiZWw6ICdKYW4nfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ0YnLCBsYWJlbDogJ0phbnVhcnknfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoU2VsZWN0Q29udHJvbCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMuYXR0cmlidXRlcy5kYXlfZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdEYXkgZm9ybWF0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBkYXlfZm9ybWF0OiB2YWx1ZSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ2QnLCBsYWJlbDogJzA5J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdqJywgbGFiZWw6ICc5J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFNlbGVjdENvbnRyb2wsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLmF0dHJpYnV0ZXMuZGF0ZV9mb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0RhdGUgZm9ybWF0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBkYXRlX2Zvcm1hdDogdmFsdWUgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdkL20nLCBsYWJlbDogJzE1LzA5J30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6ICdqL24nLCBsYWJlbDogJzE1LzknfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ20vZCcsIGxhYmVsOiAnMDkvMTUnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogJ24vaicsIGxhYmVsOiAnOS8xNSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBdIClcclxuICAgIH0gKSxcclxuICAgIHNhdmUoKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufSk7XHJcblxyXG5yZWdpc3RlckJsb2NrVHlwZSggJ2NhbGVuZGFyLXBsdXMvZXZlbnQnLCB7XHJcbiAgICB0aXRsZTogX18oICdTaW5nbGUgRXZlbnQnICksXHJcbiAgICBkZXNjcmlwdGlvbjogX18oICdEaXNwbGF5cyBzaW5nbGUgY2FsZW5kYXIgZXZlbnQuJyApLFxyXG4gICAgY2F0ZWdvcnk6ICAnd2lkZ2V0cycsXHJcbiAgICBpY29uOiB7XHJcbiAgICAgICAgc3JjOiAnY2FsZW5kYXItYWx0JyxcclxuICAgIH0sXHJcbiAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgZXZlbnRfaWQ6IHt9LFxyXG4gICAgfSxcclxuICAgIGVkaXQocHJvcHMpe1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KCdkaXYnLCB7fSwgW1xyXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KCAnZGl2Jywge30sIGNyZWF0ZUVsZW1lbnQoIFNlcnZlclNpZGVSZW5kZXIsIHtcclxuICAgICAgICAgICAgICAgIGJsb2NrOiBcImNhbGVuZGFyLXBsdXMvZXZlbnRcIixcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHByb3BzLmF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICAgICAgICBFbXB0eVJlc3BvbnNlUGxhY2Vob2xkZXI6IGNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7fSwgJ3Rlc3QnIClcclxuICAgICAgICAgICAgfSApICksXHJcbiAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIEluc3BlY3RvckNvbnRyb2xzLCB7fSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoIFBhbmVsQm9keSwgeyB0aXRsZTogX18oICdFdmVudCBTZXR0aW5ncycgKSwgaW5pdGlhbE9wZW46IHRydWUgfSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFRleHRDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmV2ZW50X2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogX18oICdFdmVudCBJZCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVscDogX18oICdVc2UgRXZlbnRzID4gRXZlbnRzIG9uIGFkbWluIGFyZWEgdG8gc2VhcmNoIGZvciB5b3VyIGV2ZW50IGJ5IHRpdGxlIG9yIElEJyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZXZlbnRfaWQ6IHZhbHVlIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIF0gKVxyXG4gICAgfSxcclxuICAgIHNhdmUoKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufSk7XHJcblxyXG5yZWdpc3RlckJsb2NrVHlwZSggJ2NhbGVuZGFyLXBsdXMvZXZlbnRzLWxpc3QnLCB7XHJcbiAgICB0aXRsZTogX18oICdFdmVudHMgTGlzdCcgKSxcclxuICAgIGRlc2NyaXB0aW9uOiBfXyggJ0Rpc3BsYXlzIGV2ZW50cyBsaXN0LicgKSxcclxuICAgIGNhdGVnb3J5OiAgJ3dpZGdldHMnLFxyXG4gICAgaWNvbjoge1xyXG4gICAgICAgIHNyYzogJ2NhbGVuZGFyLWFsdCcsXHJcbiAgICB9LFxyXG4gICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgIGV2ZW50czoge2RlZmF1bHQ6IDV9LFxyXG4gICAgICAgIGNhdGVnb3J5OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXNwbGF5X2xvY2F0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJyxcclxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc3BsYXlfZXhjZXJwdDoge1xyXG4gICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBlZGl0OiB3aXRoU2VsZWN0KCBmdW5jdGlvbiggc2VsZWN0ICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNhdGVnb3JpZXM6IHNlbGVjdCgnY29yZScpLmdldEVudGl0eVJlY29yZHMoJ3RheG9ub215JywgJ2NhbGVuZGFyX2V2ZW50X2NhdGVnb3J5Jywge3Blcl9wYWdlOiAtMX0pXHJcbiAgICAgICAgfTtcclxuICAgIH0gKSggZnVuY3Rpb24oIHByb3BzICkge1xyXG4gICAgICAgIHZhciBjYXRlZ29yeU9wdGlvbnMgPSBbIHsgdmFsdWU6IDAsIGxhYmVsOiBfXyggJ0FsbCcgKSB9IF07XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkQ2F0ZWdvcmllcyA9IHByb3BzLmF0dHJpYnV0ZXMuY2F0ZWdvcnlcclxuICAgICAgICAgICAgLnNwbGl0KCAnLCcgKVxyXG4gICAgICAgICAgICAubWFwKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oIHZhbHVlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KCB2YWx1ZS50cmltKCkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEgaXNOYU4oIG51bSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiggcHJvcHMuY2F0ZWdvcmllcyApIHtcclxuICAgICAgICAgICAgcHJvcHMuY2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlPcHRpb25zLnB1c2goe3ZhbHVlOmNhdGVnb3J5LmlkLCBsYWJlbDpjYXRlZ29yeS5uYW1lfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnZGl2Jywge30sIFtcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggJ2RpdicsIHt9LCBjcmVhdGVFbGVtZW50KCBTZXJ2ZXJTaWRlUmVuZGVyLCB7XHJcbiAgICAgICAgICAgICAgICBibG9jazogXCJjYWxlbmRhci1wbHVzL2V2ZW50cy1saXN0XCIsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICB9ICkgKSxcclxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggSW5zcGVjdG9yQ29udHJvbHMsIHt9LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudCggUGFuZWxCb2R5LCB7IHRpdGxlOiBfXyggJ0V2ZW50cyBTZXR0aW5ncycgKSwgaW5pdGlhbE9wZW46IHRydWUgfSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeVNlbGVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnQ2F0ZWdvcnknICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzOiBjYXRlZ29yeU9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWRDYXRlZ29yaWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISBpZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2F0ZWdvcmllcyA9IHByb3BzLmNhdGVnb3JpZXMubWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBpdGVtICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXRlZ29yaWVzLnB1c2goIDAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgY2F0ZWdvcnk6IHNlbGVjdGVkQ2F0ZWdvcmllcy5qb2luKCAnLCcgKSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7IGNhdGVnb3J5OiAnJyB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHNlbGVjdGVkQ2F0ZWdvcmllcy5pbmRleE9mKCBpZCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICYmIGluZGV4ID09PSAtMSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXRlZ29yaWVzLnB1c2goIGlkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggaW5kZXggIT09IC0xICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZWN0ZWRDYXRlZ29yaWVzWyBpbmRleCBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRBdHRyaWJ1dGVzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBzZWxlY3RlZENhdGVnb3JpZXMuam9pbiggJywnIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoUmFuZ2VDb250cm9sLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5hdHRyaWJ1dGVzLmV2ZW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IF9fKCAnTnVtYmVyIG9mIGV2ZW50cycgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZXZlbnRzOiB2YWx1ZSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChfX2V4cGVyaW1lbnRhbFZpZXcsIHt9LCBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2V4cGVyaW1lbnRhbFNwYWNlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2V4cGVyaW1lbnRhbEhlYWRpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBsZXZlbDogNSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fKCAnQ2hvb3NlIGZpZWxkcyB0byBkaXNwbGF5JyApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hDb250cm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0xvY2F0aW9uJyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHByb3BzLmF0dHJpYnV0ZXMuZGlzcGxheV9sb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2V0QXR0cmlidXRlcyggeyBkaXNwbGF5X2xvY2F0aW9uOiB2YWx1ZSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hDb250cm9sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBfXyggJ0V4Y2VycHQnICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogcHJvcHMuYXR0cmlidXRlcy5kaXNwbGF5X2V4Y2VycHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgZGlzcGxheV9leGNlcnB0OiB2YWx1ZSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgXSApXHJcbiAgICB9ICksXHJcbiAgICBzYXZlKCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n")}});